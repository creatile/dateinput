<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Foundation Starter Template</title>
    <!-- Compressed CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.3/css/foundation.min.css"  />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pikaday/1.6.1/css/pikaday.min.css"  /> 
    <link rel="stylesheet" href="wickedpicker.min.css"  />
    <style>
      .container {
        margin: auto;
        width: 100%;
        max-width: 800px;
        padding: 30px;
      }

      .datepicker {
        border-color: blue;
      }
    </style>
  </head>
  <body>
    <div id="element" class="container">
      <h1>Hello, world!</h1>
      <div class="row">
        <div class="small-12">
          <label>TIME WITH STEP</label>
          <input type="time" name="time" step="900">
        </div>
        <div class="small-12">
          <label>TIME WITH TIME PICKER</label>
          <input id="time" class="timepickertest" type="time" name="pickatime">
        </div>
        <div class="small-12">
          <label>TEXT WITH TIME PICKER</label>
          <input id="timepicker" class="timepicker" type="text" name="pickatime">
        </div>
        <div class="small-12">
          <label>DATE HTML5</label>
          <input type="date" name="date">
        </div>
        <div class="small-12">
          <label>DATE PICKADAY</label>
          <input class="datepicker" id="datepicker" type="text" name="pickadate">
        </div>
        <div class="small-12">
          <label>DATE TIME HTML5</label>
          <input type="datetime-local" name="datetime">
        </div>
      </div>
    </div>

<!-- Compressed JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.3/js/foundation.min.js"></script> 
    <script src="js/moment.min.js"></script>
    <script src="js/wickedpicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pikaday/1.6.1/pikaday.min.js" ></script>
    <script>
      $(document).foundation();

      //var picker = new Pikaday({ field: document.getElementById('datepicker') });
      var picker = new Pikaday({
        field: document.getElementById('datepicker'),
        format: 'D/M/YYYY',
        toString(date, format) {
            // you should do formatting based on the passed format,
            // but we will just return 'D/M/YYYY' for simplicity
            const day = date.getDate();
            const month = date.getMonth() + 1;
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        },
        parse(dateString, format) {
            // dateString is the result of `toString` method
            const parts = dateString.split('/');
            const day = parseInt(parts[0], 10);
            const month = parseInt(parts[1] - 1, 10);
            const year = parseInt(parts[1], 10);
            return new Date(year, month, day);
        }
    });
      var timeoptions = {
        showSeconds: false,
        twentyFour: true,
        minutesInterval: 15,
        now: "12:00",
      }
      if (Foundation.MediaQuery.is('small only')) {
        console.log("small size");
        // False if medium or large
        $('#timepicker').prop('type', 'time').removeClass('timepicker');
        $('#datepicker').prop('type', 'date');
        var wickedpicker = null;
        picker.destroy();
      }else{
        var wickedpicker = $('#timepicker').wickedpicker(timeoptions);
      }
      $(window).on('changed.zf.mediaquery', function(event, newSize, oldSize) {
        // newSize is the name of the now-current breakpoint, oldSize is the previous breakpoint
        if(newSize === 'small'){
          console.log("small size");
          $('#timepicker').prop('type', 'time').removeClass('timepicker');
          $('#datepicker').prop('type', 'date');
          if (picker != null){
          picker.destroy();
          }
          var wickedpicker = null;
     
        }else if(newSize === 'medium') {
          console.log("medium size");
          $('#timepicker').prop('type', 'text').removeClass('timepicker');
          $('#datepicker').prop('type', 'text');
          if (picker == null){
            // your code here.
            var picker = new Pikaday({
              field: document.getElementById('datepicker'),
              format: 'D/M/YYYY',
              toString(date, format) {
                  // you should do formatting based on the passed format,
                  // but we will just return 'D/M/YYYY' for simplicity
                  const day = date.getDate();
                  const month = date.getMonth() + 1;
                  const year = date.getFullYear();
                  return `${day}/${month}/${year}`;
              },
              parse(dateString, format) {
                  // dateString is the result of `toString` method
                  const parts = dateString.split('/');
                  const day = parseInt(parts[0], 10);
                  const month = parseInt(parts[1] - 1, 10);
                  const year = parseInt(parts[1], 10);
                  return new Date(year, month, day);
              }
          });
          };
          if (wickedpicker == null){
            var wickedpicker = $('#timepicker').wickedpicker(timeoptions);
          };
          
        };
      });
      
    </script>

  </body>
</html>
